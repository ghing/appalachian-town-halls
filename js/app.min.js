(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TownHalls = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function setDefault(o, prop, dflt) {
  if (!(prop in o)) {
    o[prop] = dflt;
  }

  return o[prop];
}

var MeetingStore = function () {
  function MeetingStore() {
    _classCallCheck(this, MeetingStore);

    this._meetings = [];
    this._phoneMeetings = [];
    this._meetingsByDate = {};
    this._meetingsByOfficial = {};
    this._meetingsByDivision = {};
    this._phoneMeetingsByDivision = {};
    this._officials = [];
    this._officialsByDivision = {};
    this._phoneOnlyByDivision = {};
  }

  _createClass(MeetingStore, [{
    key: 'setOfficials',
    value: function setOfficials(officials) {
      this._officials = officials;
      this._setMeetingsFromOfficials(this._officials);
    }
  }, {
    key: 'getOfficials',
    value: function getOfficials() {
      return this._officials;
    }
  }, {
    key: '_setMeetingsFromOfficials',
    value: function _setMeetingsFromOfficials(officials) {
      var _this = this;

      var sort = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      this._meetings = [];
      this._meetingsByDate = {};
      this._officialsByDivision = {};

      officials.forEach(function (official) {
        _this._officialsByDivision[official.office.division.ocd_id] = official;

        official.meetings.forEach(function (meeting) {
          meeting.official = official;
          _this.addMeeting(meeting);
        });
      });

      if (sort) {
        this._sortMeetingsByDate();
      }

      return this;
    }
  }, {
    key: '_sortMeetingsByDate',
    value: function _sortMeetingsByDate() {
      this._meetings.sort(function (a, b) {
        if (a.date > b.date) {
          return -1;
        }

        if (a.date < b.date) {
          return 1;
        }

        return 0;
      });
    }
  }, {
    key: 'addMeeting',
    value: function addMeeting(meeting) {
      this._meetings.push(meeting);

      if (meeting.meeting_type == 'telephone') {
        this._phoneMeetings.push(meeting);
      }

      setDefault(this._meetingsByDate, meeting.date, []).push(meeting);

      setDefault(this._meetingsByOfficial, meeting.official.id, []).push(meeting);

      var ocdId = meeting.official.office.division.ocd_id;
      setDefault(this._meetingsByDivision, ocdId, []).push(meeting);

      setDefault(this._phoneMeetingsByDivision, ocdId, []).push(meeting);

      if (this._phoneMeetingsByDivision.length == this._meetingsByDivision.length) {
        this._phoneOnlyByDivision[ocdId] = true;
      } else {
        this._phoneOnlyByDivision[ocdId] = false;
      }

      return this;
    }
  }, {
    key: 'getMeetings',
    value: function getMeetings() {
      return this._meetings;
    }
  }, {
    key: 'getPhoneMeetings',
    value: function getPhoneMeetings() {
      return this._phoneMeetings;
    }
  }, {
    key: 'getMeetingsForDate',
    value: function getMeetingsForDate(date, filter) {
      var meetings = this._meetingsByDate[date];
      if (!meetings) {
        return [];
      }

      if (filter) {
        return meetings.filter(filter);
      }

      return meetings;
    }
  }, {
    key: 'getMeetingsForOfficial',
    value: function getMeetingsForOfficial(officialId) {
      return this._meetingsByOfficial[officialId];
    }
  }, {
    key: 'getMeetingsForDivision',
    value: function getMeetingsForDivision(ocdId) {
      var meetings = this._meetingsByDivision[ocdId];
      if (!meetings) {
        return [];
      }

      return meetings;
    }
  }, {
    key: 'getPhoneMeetingsForDivision',
    value: function getPhoneMeetingsForDivision(ocdId) {
      var meetings = this._phoneMeetingsByDivision[ocdId];
      if (!meetings) {
        return [];
      }

      return meetings;
    }
  }, {
    key: 'getOfficialForDivision',
    value: function getOfficialForDivision(ocdId) {
      return this._officialsByDivision[ocdId];
    }
  }, {
    key: 'getAvgMeetings',
    value: function getAvgMeetings() {
      return Math.round(this._meetings.length / this._officials.length);
    }
  }, {
    key: 'getPercentPhoneMeetings',
    value: function getPercentPhoneMeetings() {
      return this._phoneMeetings.length / this._meetings.length;
    }
  }]);

  return MeetingStore;
}();

exports.default = MeetingStore;

},{}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.App = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

require('core-js/fn/object/assign');

var _d = require('d3');

var d3 = _interopRequireWildcard(_d);

var _MeetingStore = require('./MeetingStore');

var _MeetingStore2 = _interopRequireDefault(_MeetingStore);

var _timeline = require('./timeline');

var _timeline2 = _interopRequireDefault(_timeline);

var _repsearch = require('./repsearch');

var _repsearch2 = _interopRequireDefault(_repsearch);

var _repcontext = require('./repcontext');

var _repcontext2 = _interopRequireDefault(_repcontext);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var App = exports.App = function () {
  function App(options) {
    var _this = this;

    _classCallCheck(this, App);

    this._timelineContainer = options.timelineContainer;
    this._repSearchContainer = options.repSearchContainer;
    this._repContextContainer = options.repContextContainer;
    this._googleApiKey = options.googleApiKey;
    this._labels = Object.assign({}, options.labels);
    this._meetingStore = new _MeetingStore2.default();
    this._startDate = options.startDate || new Date(2017, 0, 20);
    this._endDate = options.endDate || new Date();
    this._annotations = options.annotations || {
      "2017-01-20": {
        label: "Inauguration day"
      },
      "2017-02-20": {
        label: "District work period begins"
      },
      "2017-02-24": {
        label: "District work period ends"
      },
      "2017-04-10": {
        label: "District work period begins"
      },
      "2017-04-21": {
        label: "District work period ends"
      }
    };

    // Explicitely bind this method to the instance so that we can access
    // `this` when the method is used as a callback
    this._handleAddress = this._handleAddress.bind(this);
    this._handleReset = this._handleReset.bind(this);

    // Construct some d3 components
    this._timeline = (0, _timeline2.default)();
    this._search = (0, _repsearch2.default)().handleAddress(this._handleAddress).handleReset(this._handleReset);
    this._context = (0, _repcontext2.default)().labels(this._labels);

    // These are the state variables
    this._allDays = [];
    this._searchAddress = null;

    d3.json(options.officialMeetingsJsonUrl, function (data) {
      _this._meetingStore.setOfficials(data.objects);
      _this._allDays = _this._meetingsByDay(_this._meetingStore, _this._startDate, _this._endDate, _this._annotations);

      _this._renderTimeline(_this._allDays);

      d3.select(_this._repSearchContainer).call(_this._search);
    });
  }

  _createClass(App, [{
    key: '_handleReset',
    value: function _handleReset() {
      if (this._searchAddress !== null) {
        this._renderTimeline(this._allDays);
        d3.select(this._repContextContainer).datum(null).call(this._context);
      }
    }
  }, {
    key: '_renderTimeline',
    value: function _renderTimeline(days) {
      d3.select(this._timelineContainer).datum(days).call(this._timeline);
    }
  }, {
    key: '_handleAddress',
    value: function _handleAddress(address, callback) {
      var _this2 = this;

      this._searchAddress = address;

      // Use the Google Civic Information API to lookup the U.S. Representative
      // for an address.
      //
      // See https://developers.google.com/civic-information/docs/v2/representatives/representativeInfoByAddress
      // for API docs.
      // A few quick notes:
      //
      // We just need to look up reps by their district, so we just need the
      // political division and not data about offices.  We exclude office data
      // by specifying `includeOffices=false`
      //
      // `levels=country` and `roles=legislatorLowerBody` specifies that we only
      // care about the house.
      var url = 'https://content.googleapis.com/civicinfo/v2/representatives?address=' + encodeURIComponent(address) + '&includeOffices=false&levels=country&roles=legislatorLowerBody&alt=json&key=' + this._googleApiKey;

      d3.json(url, function (data) {
        if (!data) {
          callback({
            msg: _this2._labels.noDistrictFound
          }, null);
          return;
        }
        // Divisions is an object keyed by OCD ID. We need a list of these IDs.
        var divisions = Object.keys(data.divisions);

        // There should be one and only one congressional district for an address
        if (divisions.length != 1) {
          callback({
            msg: division.length == 0 ? _this2._labels.noDistrictFound : _this2._labels.multipleDistrictsFound
          }, null);
        }

        // Success
        var ocdId = divisions[0];
        var districtName = data.divisions[ocdId].name;

        // Tell the form
        callback(null, {});

        var meetingsForDivision = _this2._meetingStore.getMeetingsForDivision(divisions[0]);
        var meetingIds = meetingsForDivision.reduce(function (lookup, meeting) {
          lookup[meeting.id] = true;
          return lookup;
        }, {});

        d3.select(_this2._repContextContainer).datum({
          official: _this2._meetingStore.getOfficialForDivision(ocdId),
          numMeetings: meetingsForDivision.length,
          avgMeetings: _this2._meetingStore.getAvgMeetings(),
          districtName: districtName,
          numPhoneMeetings: _this2._meetingStore.getPhoneMeetingsForDivision(ocdId).length,
          pctPhoneMeetings: _this2._meetingStore.getPercentPhoneMeetings()
        }).call(_this2._context);

        var days = _this2._meetingsByDay(_this2._meetingStore, _this2._startDate, _this2._endDate, _this2._annotations, function (meeting) {
          return meetingIds[meeting.id];
        });
        _this2._renderTimeline(days);
      });
    }
  }, {
    key: '_meetingsByDay',
    value: function _meetingsByDay(meetingStore, startDate, endDate, annotations, filter) {
      var days = [];
      var format = d3.timeFormat("%Y-%m-%d");

      d3.timeDay.range(startDate, endDate, 1).forEach(function (date, i) {
        var dateStr = format(date);
        var meetings = meetingStore.getMeetingsForDate(dateStr, filter);

        if (meetings.length == 0 && !annotations[dateStr]) {
          return;
        }

        days.push({
          day: i + 1,
          date: date,
          meetings: meetings,
          label: annotations[dateStr] ? annotations[dateStr].label : null
        });
      });

      return days.reverse();
    }
  }]);

  return App;
}();

},{"./MeetingStore":1,"./repcontext":3,"./repsearch":4,"./timeline":5,"core-js/fn/object/assign":"core-js/fn/object/assign","d3":"d3"}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = repContext;

require('core-js/fn/object/assign');

var _d = require('d3');

var d3 = _interopRequireWildcard(_d);

var _utils = require('./utils');

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var DEFAULT_LABELS = {
  noDistrictFound: "Could not find a district matching this address",
  multipleDistrictsFound: "Found more than one districts matching this address",
  districtName: function districtName(ctx) {
    return 'This address is in ' + ctx.districtName + '.';
  },
  officialName: function officialName(ctx) {
    return 'The representative for this district is ' + ctx.official.name + '.';
  },
  avgMeetings: function avgMeetings(ctx) {
    return 'This representative has held ' + (0, _utils.apStyleNumber)(ctx.numMeetings) + ' ' + (0, _utils.pluralize)('meeting', ctx.numMeetings) + ', the average for Appalachian representatives.';
  },
  aboveAvgMeetings: function aboveAvgMeetings(ctx) {
    return 'This representative has held ' + (0, _utils.apStyleNumber)(ctx.numMeetings) + ' ' + (0, _utils.pluralize)('meeting', ctx.numMeetings) + ', more than the average for Appalachian representatives.';
  },
  belowAvgMeetings: function belowAvgMeetings(ctx) {
    var numMeetingsWord = ctx.numMeetings == 0 ? 'no' : ctx.numMeetings;
    return 'This representative has held ' + (0, _utils.apStyleNumber)(ctx.numMeetingsWord) + ' ' + (0, _utils.pluralize)('meeting', ctx.numMeetings) + ', below the average of ' + (0, _utils.apStyleNumber)(ctx.avgMeetings) + ' for Appalachian representatives.';
  },
  noPhoneMeetings: function noPhoneMeetings(ctx) {
    return 'This representative hasn\'t held any phone meetings. ' + (0, _utils.pctFormat)(ctx.pctPhoneMeetings) + ' percent of all meetings were held over the phone.';
  },
  phoneMeetings: function phoneMeetings(ctx) {
    return 'This representative held ' + (0, _utils.apStyleNumber)(ctx.numPhoneMeetings) + ' ' + (0, _utils.pluralize)('meeting', ctx.numPhoneMeetings) + ' over the phone.  ' + (0, _utils.pctFormat)(ctx.pctPhoneMeetings) + ' percent of all meetings were held over the phone.';
  }
};

function repContext() {
  var labels = Object.assign({}, DEFAULT_LABELS);

  var context = function context(selection) {
    selection.each(function (data) {
      var sel = d3.select(this);

      sel.selectAll('*').remove();

      if (!data) {
        return;
      }

      var el = sel.append('div').attr('class', 'representative-context');

      if (data.districtName) {
        el.append('span').text(labels.districtName(data));
      }

      if (data.official) {
        el.append('span').text(labels.officialName(data));
      }

      if (data.numMeetings == data.avgMeetings) {
        el.append('span').text(labels.avgMeetings(data));
      } else if (data.numMeetings > data.avgMeetings) {
        el.append('span').text(labels.aboveAvgMeetings(data));
      } else {
        el.append('span').text(labels.belowAvgMeetings(data));
      }

      if (data.numPhoneMeetings == 0) {
        el.append('span').text(labels.noPhoneMeetings(data));
      } else {
        el.append('span').text(labels.phoneMeetings(data));
      }
    });
  };

  context.labels = function (val) {
    if (!val) {
      return labels;
    }

    labels = Object.assign(labels, val);
    return context;
  };

  return context;
}

},{"./utils":6,"core-js/fn/object/assign":"core-js/fn/object/assign","d3":"d3"}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = repSearch;

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function repSearch() {
  var handleAddress = function handleAddress() {};
  var handleReset = function handleReset() {};
  var messages = null;

  var receiveResponse = function receiveResponse(err, data) {
    if (err) {
      messages.text(err.msg);
      return;
    }

    messages.text("");
  };

  var handleSubmit = function handleSubmit() {
    d3.event.preventDefault();

    var form = d3.select(d3.event.target);
    var address = form.select('.representative-search-form__address-input').node().value;

    if (!address) {
      // Don't allow an empty address
      return false;
    }

    messages = form.select('.representative-search-form__messages');
    handleAddress(address, receiveResponse);
  };

  var search = function search(selection) {
    selection.each(function () {
      var sel = d3.select(this);

      sel.selectAll('*').remove();

      var form = sel.append('form').attr('class', 'representative-search-form').on('submit', handleSubmit);

      form.append('input').attr('type', 'text').attr('class', 'representative-search-form__address-input').attr('placeholder', "Enter your address");

      form.append('button').attr('type', 'submit').text("Find your representative").attr('class', 'representative-search-form__btn representative-search-form__btn--submit');

      form.append('button').attr('type', 'reset').text("Start over").on('click', function () {
        messages.text("");
        messages.selectAll('*').remove();
        handleReset();
      }).attr('class', 'representative-search-form__btn representative-search-form__btn--reset');

      form.append('div').attr('class', 'representative-search-form__messages');
    });
  };

  search.handleAddress = function (val) {
    if (!val) {
      return handleAddress;
    }

    handleAddress = val;
    return this;
  };

  search.handleReset = function (val) {
    if (!val) {
      return handleReset;
    }

    handleReset = val;
    return this;
  };

  return search;
}

},{"d3":"d3"}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = meetingTimeline;

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function ocdIdToDistrict(ocdId) {
  var bits = ocdId.split(':');
  var state = bits[bits.length - 2].slice(0, 2).toUpperCase();
  var district = bits[bits.length - 1];
  return state + "-" + district;
}

function officialDistrict(official) {
  return ocdIdToDistrict(official.office.division.ocd_id);
}

function meetingsByOfficial(meetings) {
  var byOfficial = meetings.reduce(function (lookup, meeting) {
    if (!lookup[meeting.official.id]) {
      lookup[meeting.official.id] = {
        official: meeting.official,
        meetings: []
      };
    }
    lookup[meeting.official.id].meetings.push(meeting);
    return lookup;
  }, {});

  return d3.values(byOfficial);
}

function getPartyLabel(party) {
  if (party == "Republican") {
    return "R";
  } else if (party == "Democratic") {
    return "D";
  }
}

function renderOfficial(sel) {
  sel.each(function (d) {
    var el = d3.select(this);

    var partyLabel = getPartyLabel(d.official.party);
    var officialClass = "timeline__meeting__official";
    if (partyLabel) {
      officialClass += " timeline__meeting__official--" + partyLabel.toLowerCase();
    }

    el.append('span').attr('class', officialClass).text(d.official.name);

    if (partyLabel) {
      el.append('span').attr('class', 'timeline__meeting__party timeline__meeting__party--' + partyLabel.toLowerCase()).text(" (" + partyLabel + ")");
    }

    el.append('span').attr('class', 'timeline__meeting__district').text(" (" + officialDistrict(d.official) + ")");

    if (d.meetings.length == 1) {
      if (d.meetings[0].meeting_type == "telephone") {
        el.append('span').attr('class', 'timeline__meeting__type timeline__meeting__type--telephone').text(" \u260E");
      } else if (d.meetings[0].meeting_type == "facebook") {
        el.append('span').attr('class', 'timeline__meeting__type timeline__meeting__type--facebook').text(" f");
      } else if (d.meetings[0].meeting_type == "radio") {
        el.append('span').attr('class', 'timeline__meeting__type timeline__meeting__type--radio').text(" \u1F4FB");
      }
    }

    if (d.meetings.length > 1) {
      el.append('span').attr('class', 'timeline__meeting__count').text(" x" + d.meetings.length);
    }
  });
}

function renderDay(sel, dateFormat) {
  sel.append('h2').attr('class', 'timeline__day__number').text(function (d) {
    return d.day;
  });

  sel.append('div').attr('class', 'timeline__day__date').text(function (d) {
    return dateFormat(d.date);
  });

  sel.append('div').attr('class', 'timeline__day__label').text(function (d) {
    return d.label;
  });

  sel.selectAll('.timeline__meeting').data(function (d) {
    return meetingsByOfficial(d.meetings);
  }).enter().append('div').attr('class', 'timeline__meeting').call(renderOfficial);
}

function meetingTimeline() {
  var dateFormat = d3.timeFormat("%B %d, %Y");

  function timeline(selection) {
    selection.each(function (days) {
      var container = d3.select(this);
      container.selectAll('*').remove();

      var timeline = container.append('div').attr('class', 'timeline');

      timeline.selectAll('.timeline__day').data(days).enter().append('div').attr('class', 'timeline__day').call(renderDay, dateFormat);
    });
  }

  return timeline;
}

},{"d3":"d3"}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pluralize = pluralize;
exports.pctFormat = pctFormat;
exports.apStyleNumber = apStyleNumber;

var _d = require("d3");

var d3 = _interopRequireWildcard(_d);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function pluralize(s, n, plural) {
  if (n == 1) {
    return s;
  }

  if (plural) {
    return plural;
  }

  return s + 's';
}

function pctFormat(val) {
  return d3.format(".0%")(val).replace('%', '');
}

function apStyleNumber(num) {
  var lookup = {
    1: 'one',
    2: 'two',
    3: 'three',
    4: 'four',
    5: 'five',
    6: 'six',
    7: 'seven',
    8: 'eight',
    9: 'nine'
  };

  if (num > 0 && num < 10) {
    return lookup[num];
  }

  return num;
}

},{"d3":"d3"}]},{},[2])(2)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy93YXRjaGlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwianMvc3JjL01lZXRpbmdTdG9yZS5qcyIsImpzL3NyYy9hcHAuanMiLCJqcy9zcmMvcmVwY29udGV4dC5qcyIsImpzL3NyYy9yZXBzZWFyY2guanMiLCJqcy9zcmMvdGltZWxpbmUuanMiLCJqcy9zcmMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0FDQUEsU0FBUyxVQUFULENBQW9CLENBQXBCLEVBQXVCLElBQXZCLEVBQTZCLElBQTdCLEVBQW1DO0FBQ2pDLE1BQUksRUFBRSxRQUFRLENBQVYsQ0FBSixFQUFrQjtBQUNoQixNQUFFLElBQUYsSUFBVSxJQUFWO0FBQ0Q7O0FBRUQsU0FBTyxFQUFFLElBQUYsQ0FBUDtBQUNEOztJQUVLLFk7QUFDSiwwQkFBYztBQUFBOztBQUNaLFNBQUssU0FBTCxHQUFpQixFQUFqQjtBQUNBLFNBQUssY0FBTCxHQUFzQixFQUF0QjtBQUNBLFNBQUssZUFBTCxHQUF1QixFQUF2QjtBQUNBLFNBQUssbUJBQUwsR0FBMkIsRUFBM0I7QUFDQSxTQUFLLG1CQUFMLEdBQTJCLEVBQTNCO0FBQ0EsU0FBSyx3QkFBTCxHQUFnQyxFQUFoQztBQUNBLFNBQUssVUFBTCxHQUFrQixFQUFsQjtBQUNBLFNBQUssb0JBQUwsR0FBNEIsRUFBNUI7QUFDQSxTQUFLLG9CQUFMLEdBQTRCLEVBQTVCO0FBQ0Q7Ozs7aUNBRVksUyxFQUFXO0FBQ3RCLFdBQUssVUFBTCxHQUFrQixTQUFsQjtBQUNBLFdBQUsseUJBQUwsQ0FBK0IsS0FBSyxVQUFwQztBQUNEOzs7bUNBRWM7QUFDYixhQUFPLEtBQUssVUFBWjtBQUNEOzs7OENBRXlCLFMsRUFBd0I7QUFBQTs7QUFBQSxVQUFiLElBQWEsdUVBQU4sSUFBTTs7QUFDaEQsV0FBSyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsV0FBSyxlQUFMLEdBQXVCLEVB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QSxhLEdBQUEsYTs7QUFsQmhCOztJQUFZLEU7Ozs7QUFFTCxTQUFTLFNBQVQsQ0FBbUIsQ0FBbkIsRUFBc0IsQ0FBdEIsRUFBeUIsTUFBekIsRUFBaUM7QUFDdEMsTUFBSSxLQUFLLENBQVQsRUFBWTtBQUNWLFdBQU8sQ0FBUDtBQUNEOztBQUVELE1BQUksTUFBSixFQUFZO0FBQ1YsV0FBTyxNQUFQO0FBQ0Q7O0FBRUQsU0FBTyxJQUFJLEdBQVg7QUFDRDs7QUFFTSxTQUFTLFNBQVQsQ0FBbUIsR0FBbkIsRUFBd0I7QUFDN0IsU0FBTyxHQUFHLE1BQUgsQ0FBVSxLQUFWLEVBQWlCLEdBQWpCLEVBQXNCLE9BQXRCLENBQThCLEdBQTlCLEVBQW1DLEVBQW5DLENBQVA7QUFDRDs7QUFFTSxTQUFTLGFBQVQsQ0FBdUIsR0FBdkIsRUFBNEI7QUFDakMsTUFBTSxTQUFTO0FBQ2IsT0FBRyxLQURVO0FBRWIsT0FBRyxLQUZVO0FBR2IsT0FBRyxPQUhVO0FBSWIsT0FBRyxNQUpVO0FBS2IsT0FBRyxNQUxVO0FBTWIsT0FBRyxLQU5VO0FBT2IsT0FBRyxPQVBVO0FBUWIsT0FBRyxPQVJVO0FBU2IsT0FBRztBQVRVLEdBQWY7O0FBWUEsTUFBSSxNQUFNLENBQU4sSUFBVyxNQUFNLEVBQXJCLEVBQXlCO0FBQ3ZCLFdBQU8sT0FBTyxHQUFQLENBQVA7QUFDRDs7QUFFRCxTQUFPLEdBQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJmdW5jdGlvbiBzZXREZWZhdWx0KG8sIHByb3AsIGRmbHQpIHtcbiAgaWYgKCEocHJvcCBpbiBvKSkge1xuICAgIG9bcHJvcF0gPSBkZmx0O1xuICB9XG5cbiAgcmV0dXJuIG9bcHJvcF07XG59XG5cbmNsYXNzIE1lZXRpbmdTdG9yZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX21lZXRpbmdzID0gW107XG4gICAgdGhpcy5fcGhvbmVNZWV0aW5ncyA9IFtdO1xuICAgIHRoaXMuX21lZXRpbmdzQnlEYXRlID0ge307XG4gICAgdGhpcy5fbWVldGluZ3NCeU9mZmljaWFsID0ge307XG4gICAgdGhpcy5fbWVldGluZ3NCeURpdmlzaW9uID0ge307XG4gICAgdGhpcy5fcGhvbmVNZWV0aW5nc0J5RGl2aXNpb24gPSB7fTtcbiAgICB0aGlzLl9vZmZpY2lhbHMgPSBbXTtcbiAgICB0aGlzLl9vZmZpY2lhbHNCeURpdmlzaW9uID0ge307XG4gICAgdGhpcy5fcGhvbmVPbmx5QnlEaXZpc2lvbiA9IHt9O1xuICB9XG5cbiAgc2V0T2ZmaWNpYWxzKG9mZmljaWFscykge1xuICAgIHRoaXMuX29mZmljaWFscyA9IG9mZmljaWFscztcbiAgICB0aGlzLl9zZXRNZWV0aW5nc0Zyb21PZmZpY2lhbHModGhpcy5fb2ZmaWNpYWxzKTtcbiAgfVxuXG4gIGdldE9mZmljaWFscygpIHtcbiAgICByZXR1cm4gdGhpcy5fb2ZmaWNpYWxzO1xuICB9XG5cbiAgX3NldE1lZXRpbmdzRnJvbU9mZmljaWFscyhvZmZpY2lhbHMsIHNvcnQgPSB0cnVlKSB7XG4gICAgdGhpcy5fbWVldGluZ3MgPSBbXTtcbiAgICB0aGlzLl9tZWV0aW5nc0J5RGF0ZSA9IHt9O1xuICAgIHRoaXMuX29mZmljaWFsc0J5RGl2aXNpb24gPSB7fTtcblxuICAgIG9mZmljaWFscy5mb3JFYWNoKG9mZmljaWFsID0+IHtcbiAgICAgIHRoaXMuX29mZmljaWFsc0J5RGl2aXNpb25bb2ZmaWNpYWwub2ZmaWNlLmRpdmlzaW9uLm9jZF9pZF0gPSBvZmZpY2lhbDtcblxuICAgICAgb2ZmaWNpYWwubWVldGluZ3MuZm9yRWFjaChtZWV0aW5nID0+IHtcbiAgICAgICAgbWVldGluZy5vZmZpY2lhbCA9IG9mZmljaWFsO1xuICAgICAgICB0aGlzLmFkZE1lZXRpbmcobWVldGluZyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmIChzb3J0KSB7XG4gICAgICB0aGlzLl9zb3J0TWVldGluZ3NCeURhdGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIF9zb3J0TWVldGluZ3NCeURhdGUoKSB7XG4gICAgdGhpcy5fbWVldGluZ3Muc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGEuZGF0ZSA+IGIuZGF0ZSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG5cbiAgICAgIGlmIChhLmRhdGUgPCBiLmRhdGUpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAwO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkTWVldGluZyhtZWV0aW5nKSB7XG4gICAgdGhpcy5fbWVldGluZ3MucHVzaChtZWV0aW5nKTtcblxuICAgIGlmIChtZWV0aW5nLm1lZXRpbmdfdHlwZSA9PSAndGVsZXBob25lJykge1xuICAgICAgdGhpcy5fcGhvbmVNZWV0aW5ncy5wdXNoKG1lZXRpbmcpO1xuICAgIH1cblxuICAgIHNldERlZmF1bHQodGhpcy5fbWVldGluZ3NCeURhdGUsIG1lZXRpbmcuZGF0ZSwgW10pLnB1c2gobWVldGluZyk7XG5cbiAgICBzZXREZWZhdWx0KHRoaXMuX21lZXRpbmdzQnlPZmZpY2lhbCwgbWVldGluZy5vZmZpY2lhbC5pZCwgW10pXG4gICAgICAucHVzaChtZWV0aW5nKTtcblxuICAgIGNvbnN0IG9jZElkID0gbWVldGluZy5vZmZpY2lhbC5vZmZpY2UuZGl2aXNpb24ub2NkX2lkO1xuICAgIHNldERlZmF1bHQodGhpcy5fbWVldGluZ3NCeURpdmlzaW9uLCBvY2RJZCwgW10pLnB1c2gobWVldGluZyk7XG5cbiAgICBzZXREZWZhdWx0KHRoaXMuX3Bob25lTWVldGluZ3NCeURpdmlzaW9uLCBvY2RJZCwgW10pLnB1c2gobWVldGluZyk7XG5cbiAgICBpZiAodGhpcy5fcGhvbmVNZWV0aW5nc0J5RGl2aXNpb24ubGVuZ3RoID09IHRoaXMuX21lZXRpbmdzQnlEaXZpc2lvbi5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3Bob25lT25seUJ5RGl2aXNpb25bb2NkSWRdID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9waG9uZU9ubHlCeURpdmlzaW9uW29jZElkXSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0TWVldGluZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21lZXRpbmdzO1xuICB9XG5cbiAgZ2V0UGhvbmVNZWV0aW5ncygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGhvbmVNZWV0aW5ncztcbiAgfVxuXG4gIGdldE1lZXRpbmdzRm9yRGF0ZShkYXRlLCBmaWx0ZXIpIHtcbiAgICBjb25zdCBtZWV0aW5ncyA9IHRoaXMuX21lZXRpbmdzQnlEYXRlW2RhdGVdO1xuICAgIGlmICghbWVldGluZ3MpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVyKSB7XG4gICAgICByZXR1cm4gbWVldGluZ3MuZmlsdGVyKGZpbHRlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lZXRpbmdzO1xuICB9XG5cbiAgZ2V0TWVldGluZ3NGb3JPZmZpY2lhbChvZmZpY2lhbElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX21lZXRpbmdzQnlPZmZpY2lhbFtvZmZpY2lhbElkXTtcbiAgfVxuXG4gIGdldE1lZXRpbmdzRm9yRGl2aXNpb24ob2NkSWQpIHtcbiAgICBjb25zdCBtZWV0aW5ncyA9IHRoaXMuX21lZXRpbmdzQnlEaXZpc2lvbltvY2RJZF07XG4gICAgaWYgKCFtZWV0aW5ncykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBtZWV0aW5ncztcbiAgfVxuXG4gIGdldFBob25lTWVldGluZ3NGb3JEaXZpc2lvbihvY2RJZCkge1xuICAgIGNvbnN0IG1lZXRpbmdzID0gdGhpcy5fcGhvbmVNZWV0aW5nc0J5RGl2aXNpb25bb2NkSWRdO1xuICAgIGlmICghbWVldGluZ3MpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVldGluZ3M7XG4gIH1cblxuICBnZXRPZmZpY2lhbEZvckRpdmlzaW9uKG9jZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX29mZmljaWFsc0J5RGl2aXNpb25bb2NkSWRdO1xuICB9XG5cbiAgZ2V0QXZnTWVldGluZ3MoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5fbWVldGluZ3MubGVuZ3RoIC8gdGhpcy5fb2ZmaWNpYWxzLmxlbmd0aCk7XG4gIH1cblxuICBnZXRQZXJjZW50UGhvbmVNZWV0aW5ncygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGhvbmVNZWV0aW5ncy5sZW5ndGggLyB0aGlzLl9tZWV0aW5ncy5sZW5ndGg7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWVldGluZ1N0b3JlO1xuIiwiaW1wb3J0ICdjb3JlLWpzL2ZuL29iamVjdC9hc3NpZ24nO1xuaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmltcG9ydCBNZWV0aW5nU3RvcmUgZnJvbSAnLi9NZWV0aW5nU3RvcmUnO1xuaW1wb3J0IG1lZXRpbmdUaW1lbGluZSBmcm9tICcuL3RpbWVsaW5lJztcbmltcG9ydCByZXBTZWFyY2ggZnJvbSAnLi9yZXBzZWFyY2gnO1xuaW1wb3J0IHJlcENvbnRleHQgZnJvbSAnLi9yZXBjb250ZXh0JztcblxuZXhwb3J0IGNsYXNzIEFwcCB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl90aW1lbGluZUNvbnRhaW5lciA9IG9wdGlvbnMudGltZWxpbmVDb250YWluZXI7XG4gICAgdGhpcy5fcmVwU2VhcmNoQ29udGFpbmVyID0gb3B0aW9ucy5yZXBTZWFyY2hDb250YWluZXI7XG4gICAgdGhpcy5fcmVwQ29udGV4dENvbnRhaW5lciA9IG9wdGlvbnMucmVwQ29udGV4dENvbnRhaW5lcjtcbiAgICB0aGlzLl9nb29nbGVBcGlLZXkgPSBvcHRpb25zLmdvb2dsZUFwaUtleTtcbiAgICB0aGlzLl9sYWJlbHMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLmxhYmVscyk7XG4gICAgdGhpcy5fbWVldGluZ1N0b3JlID0gbmV3IE1lZXRpbmdTdG9yZSgpO1xuICAgIHRoaXMuX3N0YXJ0RGF0ZSA9IG9wdGlvbnMuc3RhcnREYXRlIHx8IG5ldyBEYXRlKDIwMTcsIDAsIDIwKTtcbiAgICB0aGlzLl9lbmREYXRlID0gb3B0aW9ucy5lbmREYXRlIHx8IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5fYW5ub3RhdGlvbnMgPSBvcHRpb25zLmFubm90YXRpb25zIHx8IHtcbiAgICAgIFwiMjAxNy0wMS0yMFwiOiB7XG4gICAgICAgIGxhYmVsOiBcIkluYXVndXJhdGlvbiBkYXlcIlxuICAgICAgfSxcbiAgICAgIFwiMjAxNy0wMi0yMFwiOiB7XG4gICAgICAgIGxhYmVsOiBcIkRpc3RyaWN0IHdvcmsgcGVyaW9kIGJlZ2luc1wiXG4gICAgICB9LFxuICAgICAgXCIyMDE3LTAyLTI0XCI6IHtcbiAgICAgICAgbGFiZWw6IFwiRGlzdHJpY3Qgd29yayBwZXJpb2QgZW5kc1wiXG4gICAgICB9LFxuICAgICAgXCIyMDE3LTA0LTEwXCI6IHtcbiAgICAgICAgbGFiZWw6IFwiRGlzdHJpY3Qgd29yayBwZXJpb2QgYmVnaW5zXCJcbiAgICAgIH0sXG4gICAgICBcIjIwMTctMDQtMjFcIjoge1xuICAgICAgICBsYWJlbDogXCJEaXN0cmljdCB3b3JrIHBlcmlvZCBlbmRzXCJcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRXhwbGljaXRlbHkgYmluZCB0aGlzIG1ldGhvZCB0byB0aGUgaW5zdGFuY2Ugc28gdGhhdCB3ZSBjYW4gYWNjZXNzXG4gICAgLy8gYHRoaXNgIHdoZW4gdGhlIG1ldGhvZCBpcyB1c2VkIGFzIGEgY2FsbGJhY2tcbiAgICB0aGlzLl9oYW5kbGVBZGRyZXNzID0gdGhpcy5faGFuZGxlQWRkcmVzcy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZVJlc2V0ID0gdGhpcy5faGFuZGxlUmVzZXQuYmluZCh0aGlzKTtcblxuICAgIC8vIENvbnN0cnVjdCBzb21lIGQzIGNvbXBvbmVudHNcbiAgICB0aGlzLl90aW1lbGluZSA9IG1lZXRpbmdUaW1lbGluZSgpO1xuICAgIHRoaXMuX3NlYXJjaCA9IHJlcFNlYXJjaCgpXG4gICAgICAuaGFuZGxlQWRkcmVzcyh0aGlzLl9oYW5kbGVBZGRyZXNzKVxuICAgICAgLmhhbmRsZVJlc2V0KHRoaXMuX2hhbmRsZVJlc2V0KTtcbiAgICB0aGlzLl9jb250ZXh0ID0gcmVwQ29udGV4dCgpXG4gICAgICAubGFiZWxzKHRoaXMuX2xhYmVscyk7XG5cbiAgICAvLyBUaGVzZSBhcmUgdGhlIHN0YXRlIHZhcmlhYmxlc1xuICAgIHRoaXMuX2FsbERheXMgPSBbXTtcbiAgICB0aGlzLl9zZWFyY2hBZGRyZXNzID0gbnVsbDtcblxuICAgIGQzLmpzb24ob3B0aW9ucy5vZmZpY2lhbE1lZXRpbmdzSnNvblVybCwgZGF0YSA9PiB7XG4gICAgICB0aGlzLl9tZWV0aW5nU3RvcmUuc2V0T2ZmaWNpYWxzKGRhdGEub2JqZWN0cyk7XG4gICAgICB0aGlzLl9hbGxEYXlzID0gdGhpcy5fbWVldGluZ3NCeURheShcbiAgICAgICAgdGhpcy5fbWVldGluZ1N0b3JlLFxuICAgICAgICB0aGlzLl9zdGFydERhdGUsXG4gICAgICAgIHRoaXMuX2VuZERhdGUsXG4gICAgICAgIHRoaXMuX2Fubm90YXRpb25zXG4gICAgICApO1xuXG4gICAgICB0aGlzLl9yZW5kZXJUaW1lbGluZSh0aGlzLl9hbGxEYXlzKTtcblxuICAgICAgZDMuc2VsZWN0KHRoaXMuX3JlcFNlYXJjaENvbnRhaW5lcilcbiAgICAgICAgLmNhbGwodGhpcy5fc2VhcmNoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVSZXNldCgpIHtcbiAgICBpZiAodGhpcy5fc2VhcmNoQWRkcmVzcyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5fcmVuZGVyVGltZWxpbmUodGhpcy5fYWxsRGF5cyk7XG4gICAgICBkMy5zZWxlY3QodGhpcy5fcmVwQ29udGV4dENvbnRhaW5lcilcbiAgICAgICAgLmRhdHVtKG51bGwpXG4gICAgICAgIC5jYWxsKHRoaXMuX2NvbnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIF9yZW5kZXJUaW1lbGluZShkYXlzKSB7XG4gICAgZDMuc2VsZWN0KHRoaXMuX3RpbWVsaW5lQ29udGFpbmVyKVxuICAgICAgLmRhdHVtKGRheXMpXG4gICAgICAuY2FsbCh0aGlzLl90aW1lbGluZSk7XG4gIH1cblxuICBfaGFuZGxlQWRkcmVzcyhhZGRyZXNzLCBjYWxsYmFjaykge1xuICAgIHRoaXMuX3NlYXJjaEFkZHJlc3MgPSBhZGRyZXNzO1xuXG4gICAgLy8gVXNlIHRoZSBHb29nbGUgQ2l2aWMgSW5mb3JtYXRpb24gQVBJIHRvIGxvb2t1cCB0aGUgVS5TLiBSZXByZXNlbnRhdGl2ZVxuICAgIC8vIGZvciBhbiBhZGRyZXNzLlxuICAgIC8vXG4gICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2NpdmljLWluZm9ybWF0aW9uL2RvY3MvdjIvcmVwcmVzZW50YXRpdmVzL3JlcHJlc2VudGF0aXZlSW5mb0J5QWRkcmVzc1xuICAgIC8vIGZvciBBUEkgZG9jcy5cbiAgICAvLyBBIGZldyBxdWljayBub3RlczpcbiAgICAvL1xuICAgIC8vIFdlIGp1c3QgbmVlZCB0byBsb29rIHVwIHJlcHMgYnkgdGhlaXIgZGlzdHJpY3QsIHNvIHdlIGp1c3QgbmVlZCB0aGVcbiAgICAvLyBwb2xpdGljYWwgZGl2aXNpb24gYW5kIG5vdCBkYXRhIGFib3V0IG9mZmljZXMuICBXZSBleGNsdWRlIG9mZmljZSBkYXRhXG4gICAgLy8gYnkgc3BlY2lmeWluZyBgaW5jbHVkZU9mZmljZXM9ZmFsc2VgXG4gICAgLy9cbiAgICAvLyBgbGV2ZWxzPWNvdW50cnlgIGFuZCBgcm9sZXM9bGVnaXNsYXRvckxvd2VyQm9keWAgc3BlY2lmaWVzIHRoYXQgd2Ugb25seVxuICAgIC8vIGNhcmUgYWJvdXQgdGhlIGhvdXNlLlxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL2NvbnRlbnQuZ29vZ2xlYXBpcy5jb20vY2l2aWNpbmZvL3YyL3JlcHJlc2VudGF0aXZlcz9hZGRyZXNzPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGFkZHJlc3MpfSZpbmNsdWRlT2ZmaWNlcz1mYWxzZSZsZXZlbHM9Y291bnRyeSZyb2xlcz1sZWdpc2xhdG9yTG93ZXJCb2R5JmFsdD1qc29uJmtleT0ke3RoaXMuX2dvb2dsZUFwaUtleX1gO1xuXG4gICAgZDMuanNvbih1cmwsIGRhdGEgPT4ge1xuICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIGNhbGxiYWNrKHtcbiAgICAgICAgICBtc2c6IHRoaXMuX2xhYmVscy5ub0Rpc3RyaWN0Rm91bmRcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIERpdmlzaW9ucyBpcyBhbiBvYmplY3Qga2V5ZWQgYnkgT0NEIElELiBXZSBuZWVkIGEgbGlzdCBvZiB0aGVzZSBJRHMuXG4gICAgICBjb25zdCBkaXZpc2lvbnMgPSBPYmplY3Qua2V5cyhkYXRhLmRpdmlzaW9ucyk7XG5cbiAgICAgIC8vIFRoZXJlIHNob3VsZCBiZSBvbmUgYW5kIG9ubHkgb25lIGNvbmdyZXNzaW9uYWwgZGlzdHJpY3QgZm9yIGFuIGFkZHJlc3NcbiAgICAgIGlmIChkaXZpc2lvbnMubGVuZ3RoICE9IDEpIHtcbiAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgIG1zZzogZGl2aXNpb24ubGVuZ3RoID09IDAgPyB0aGlzLl9sYWJlbHMubm9EaXN0cmljdEZvdW5kIDogdGhpcy5fbGFiZWxzLm11bHRpcGxlRGlzdHJpY3RzRm91bmRcbiAgICAgICAgfSwgbnVsbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFN1Y2Nlc3NcbiAgICAgIGNvbnN0IG9jZElkID0gZGl2aXNpb25zWzBdO1xuICAgICAgY29uc3QgZGlzdHJpY3ROYW1lID0gZGF0YS5kaXZpc2lvbnNbb2NkSWRdLm5hbWU7XG5cbiAgICAgIC8vIFRlbGwgdGhlIGZvcm1cbiAgICAgIGNhbGxiYWNrKG51bGwsIHt9KTtcblxuICAgICAgY29uc3QgbWVldGluZ3NGb3JEaXZpc2lvbiA9IHRoaXMuX21lZXRpbmdTdG9yZS5nZXRNZWV0aW5nc0ZvckRpdmlzaW9uKGRpdmlzaW9uc1swXSk7XG4gICAgICBjb25zdCBtZWV0aW5nSWRzID0gbWVldGluZ3NGb3JEaXZpc2lvbi5yZWR1Y2UoKGxvb2t1cCwgbWVldGluZykgPT4ge1xuICAgICAgICBsb29rdXBbbWVldGluZy5pZF0gPSB0cnVlO1xuICAgICAgICByZXR1cm4gbG9va3VwO1xuICAgICAgfSwge30pO1xuXG4gICAgICBkMy5zZWxlY3QodGhpcy5fcmVwQ29udGV4dENvbnRhaW5lcilcbiAgICAgICAgLmRhdHVtKHtcbiAgICAgICAgICBvZmZpY2lhbDogdGhpcy5fbWVldGluZ1N0b3JlLmdldE9mZmljaWFsRm9yRGl2aXNpb24ob2NkSWQpLFxuICAgICAgICAgIG51bU1lZXRpbmdzOiBtZWV0aW5nc0ZvckRpdmlzaW9uLmxlbmd0aCxcbiAgICAgICAgICBhdmdNZWV0aW5nczogdGhpcy5fbWVldGluZ1N0b3JlLmdldEF2Z01lZXRpbmdzKCksXG4gICAgICAgICAgZGlzdHJpY3ROYW1lOiBkaXN0cmljdE5hbWUsXG4gICAgICAgICAgbnVtUGhvbmVNZWV0aW5nczogdGhpcy5fbWVldGluZ1N0b3JlLmdldFBob25lTWVldGluZ3NGb3JEaXZpc2lvbihvY2RJZCkubGVuZ3RoLFxuICAgICAgICAgIHBjdFBob25lTWVldGluZ3M6IHRoaXMuX21lZXRpbmdTdG9yZS5nZXRQZXJjZW50UGhvbmVNZWV0aW5ncygpXG4gICAgICAgIH0pXG4gICAgICAgIC5jYWxsKHRoaXMuX2NvbnRleHQpO1xuXG4gICAgICBjb25zdCBkYXlzID0gdGhpcy5fbWVldGluZ3NCeURheShcbiAgICAgICAgdGhpcy5fbWVldGluZ1N0b3JlLFxuICAgICAgICB0aGlzLl9zdGFydERhdGUsXG4gICAgICAgIHRoaXMuX2VuZERhdGUsXG4gICAgICAgIHRoaXMuX2Fubm90YXRpb25zLFxuICAgICAgICBtZWV0aW5nID0+IG1lZXRpbmdJZHNbbWVldGluZy5pZF1cbiAgICAgICk7XG4gICAgICB0aGlzLl9yZW5kZXJUaW1lbGluZShkYXlzKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9tZWV0aW5nc0J5RGF5KG1lZXRpbmdTdG9yZSwgc3RhcnREYXRlLCBlbmREYXRlLCBhbm5vdGF0aW9ucywgZmlsdGVyKSB7XG4gICAgY29uc3QgZGF5cyA9IFtdO1xuICAgIGNvbnN0IGZvcm1hdCA9IGQzLnRpbWVGb3JtYXQoXCIlWS0lbS0lZFwiKTtcblxuICAgIGQzLnRpbWVEYXkucmFuZ2Uoc3RhcnREYXRlLCBlbmREYXRlLCAxKVxuICAgICAgLmZvckVhY2goKGRhdGUsIGkpID0+IHtcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZvcm1hdChkYXRlKTtcbiAgICAgICAgY29uc3QgbWVldGluZ3MgPSBtZWV0aW5nU3RvcmUuZ2V0TWVldGluZ3NGb3JEYXRlKGRhdGVTdHIsIGZpbHRlcik7XG5cbiAgICAgICAgaWYgKG1lZXRpbmdzLmxlbmd0aCA9PSAwICYmICFhbm5vdGF0aW9uc1tkYXRlU3RyXSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRheXMucHVzaCh7XG4gICAgICAgICAgZGF5OiBpKzEsXG4gICAgICAgICAgZGF0ZTogZGF0ZSxcbiAgICAgICAgICBtZWV0aW5nczogbWVldGluZ3MsXG4gICAgICAgICAgbGFiZWw6IGFubm90YXRpb25zW2RhdGVTdHJdID8gYW5ub3RhdGlvbnNbZGF0ZVN0cl0ubGFiZWwgOiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gZGF5cy5yZXZlcnNlKCk7XG4gIH1cbn1cbiIsImltcG9ydCAnY29yZS1qcy9mbi9vYmplY3QvYXNzaWduJztcbmltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5pbXBvcnQge2FwU3R5bGVOdW1iZXIsIHBjdEZvcm1hdCwgcGx1cmFsaXplfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgREVGQVVMVF9MQUJFTFMgPSB7XG4gIG5vRGlzdHJpY3RGb3VuZDogXCJDb3VsZCBub3QgZmluZCBhIGRpc3RyaWN0IG1hdGNoaW5nIHRoaXMgYWRkcmVzc1wiLFxuICBtdWx0aXBsZURpc3RyaWN0c0ZvdW5kOiBcIkZvdW5kIG1vcmUgdGhhbiBvbmUgZGlzdHJpY3RzIG1hdGNoaW5nIHRoaXMgYWRkcmVzc1wiLFxuICBkaXN0cmljdE5hbWU6IGZ1bmN0aW9uKGN0eCkge1xuICAgIHJldHVybiBgVGhpcyBhZGRyZXNzIGlzIGluICR7Y3R4LmRpc3RyaWN0TmFtZX0uYDtcbiAgfSxcbiAgb2ZmaWNpYWxOYW1lOiBmdW5jdGlvbihjdHgpIHtcbiAgICByZXR1cm4gYFRoZSByZXByZXNlbnRhdGl2ZSBmb3IgdGhpcyBkaXN0cmljdCBpcyAke2N0eC5vZmZpY2lhbC5uYW1lfS5gO1xuICB9LFxuICBhdmdNZWV0aW5nczogZnVuY3Rpb24oY3R4KSB7XG4gICAgcmV0dXJuICBgVGhpcyByZXByZXNlbnRhdGl2ZSBoYXMgaGVsZCAke2FwU3R5bGVOdW1iZXIoY3R4Lm51bU1lZXRpbmdzKX0gJHtwbHVyYWxpemUoJ21lZXRpbmcnLCBjdHgubnVtTWVldGluZ3MpfSwgdGhlIGF2ZXJhZ2UgZm9yIEFwcGFsYWNoaWFuIHJlcHJlc2VudGF0aXZlcy5gO1xuICB9LFxuICBhYm92ZUF2Z01lZXRpbmdzOiBmdW5jdGlvbihjdHgpIHtcbiAgICByZXR1cm4gIGBUaGlzIHJlcHJlc2VudGF0aXZlIGhhcyBoZWxkICR7YXBTdHlsZU51bWJlcihjdHgubnVtTWVldGluZ3MpfSAke3BsdXJhbGl6ZSgnbWVldGluZycsIGN0eC5udW1NZWV0aW5ncyl9LCBtb3JlIHRoYW4gdGhlIGF2ZXJhZ2UgZm9yIEFwcGFsYWNoaWFuIHJlcHJlc2VudGF0aXZlcy5gO1xuICB9LFxuICBiZWxvd0F2Z01lZXRpbmdzOiBmdW5jdGlvbihjdHgpIHtcbiAgICBjb25zdCBudW1NZWV0aW5nc1dvcmQgPSBjdHgubnVtTWVldGluZ3MgPT0gMCA/ICdubycgOiBjdHgubnVtTWVldGluZ3M7XG4gICAgcmV0dXJuICBgVGhpcyByZXByZXNlbnRhdGl2ZSBoYXMgaGVsZCAke2FwU3R5bGVOdW1iZXIoY3R4Lm51bU1lZXRpbmdzV29yZCl9ICR7cGx1cmFsaXplKCdtZWV0aW5nJywgY3R4Lm51bU1lZXRpbmdzKX0sIGJlbG93IHRoZSBhdmVyYWdlIG9mICR7YXBTdHlsZU51bWJlcihjdHguYXZnTWVldGluZ3MpfSBmb3IgQXBwYWxhY2hpYW4gcmVwcmVzZW50YXRpdmVzLmA7XG4gIH0sXG4gIG5vUGhvbmVNZWV0aW5nczogZnVuY3Rpb24oY3R4KSB7XG4gICAgcmV0dXJuIGBUaGlzIHJlcHJlc2VudGF0aXZlIGhhc24ndCBoZWxkIGFueSBwaG9uZSBtZWV0aW5ncy4gJHtwY3RGb3JtYXQoY3R4LnBjdFBob25lTWVldGluZ3MpfSBwZXJjZW50IG9mIGFsbCBtZWV0aW5ncyB3ZXJlIGhlbGQgb3ZlciB0aGUgcGhvbmUuYDtcbiAgfSxcbiAgcGhvbmVNZWV0aW5nczogZnVuY3Rpb24oY3R4KSB7XG4gICAgcmV0dXJuIGBUaGlzIHJlcHJlc2VudGF0aXZlIGhlbGQgJHthcFN0eWxlTnVtYmVyKGN0eC5udW1QaG9uZU1lZXRpbmdzKX0gJHtwbHVyYWxpemUoJ21lZXRpbmcnLCBjdHgubnVtUGhvbmVNZWV0aW5ncyl9IG92ZXIgdGhlIHBob25lLiAgJHtwY3RGb3JtYXQoY3R4LnBjdFBob25lTWVldGluZ3MpfSBwZXJjZW50IG9mIGFsbCBtZWV0aW5ncyB3ZXJlIGhlbGQgb3ZlciB0aGUgcGhvbmUuYDtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVwQ29udGV4dCgpIHtcbiAgbGV0IGxhYmVscyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfTEFCRUxTKTtcblxuICBsZXQgY29udGV4dCA9IGZ1bmN0aW9uKHNlbGVjdGlvbikge1xuICAgIHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIGNvbnN0IHNlbCA9IGQzLnNlbGVjdCh0aGlzKTtcblxuICAgICAgc2VsLnNlbGVjdEFsbCgnKicpLnJlbW92ZSgpO1xuXG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlbCA9IHNlbC5hcHBlbmQoJ2RpdicpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdyZXByZXNlbnRhdGl2ZS1jb250ZXh0Jyk7XG5cbiAgICAgIGlmIChkYXRhLmRpc3RyaWN0TmFtZSkge1xuICAgICAgICBlbC5hcHBlbmQoJ3NwYW4nKVxuICAgICAgICAgIC50ZXh0KGxhYmVscy5kaXN0cmljdE5hbWUoZGF0YSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5vZmZpY2lhbCkge1xuICAgICAgICBlbC5hcHBlbmQoJ3NwYW4nKVxuICAgICAgICAgIC50ZXh0KGxhYmVscy5vZmZpY2lhbE5hbWUoZGF0YSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5udW1NZWV0aW5ncyA9PSBkYXRhLmF2Z01lZXRpbmdzKSB7XG4gICAgICAgIGVsLmFwcGVuZCgnc3BhbicpXG4gICAgICAgICAgLnRleHQobGFiZWxzLmF2Z01lZXRpbmdzKGRhdGEpKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGRhdGEubnVtTWVldGluZ3MgPiBkYXRhLmF2Z01lZXRpbmdzKSB7XG4gICAgICAgIGVsLmFwcGVuZCgnc3BhbicpXG4gICAgICAgICAgLnRleHQobGFiZWxzLmFib3ZlQXZnTWVldGluZ3MoZGF0YSkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGVsLmFwcGVuZCgnc3BhbicpXG4gICAgICAgICAgLnRleHQobGFiZWxzLmJlbG93QXZnTWVldGluZ3MoZGF0YSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5udW1QaG9uZU1lZXRpbmdzID09IDApIHtcbiAgICAgICAgZWwuYXBwZW5kKCdzcGFuJylcbiAgICAgICAgICAudGV4dChsYWJlbHMubm9QaG9uZU1lZXRpbmdzKGRhdGEpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBlbC5hcHBlbmQoJ3NwYW4nKVxuICAgICAgICAgIC50ZXh0KGxhYmVscy5waG9uZU1lZXRpbmdzKGRhdGEpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb250ZXh0LmxhYmVscyA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIGlmICghdmFsKSB7IHJldHVybiBsYWJlbHM7IH1cblxuICAgIGxhYmVscyA9IE9iamVjdC5hc3NpZ24obGFiZWxzLCB2YWwpO1xuICAgIHJldHVybiBjb250ZXh0O1xuICB9XG5cbiAgcmV0dXJuIGNvbnRleHQ7XG59XG4iLCJpbXBvcnQgKiBhcyBkMyBmcm9tIFwiZDNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVwU2VhcmNoKCkge1xuICBsZXQgaGFuZGxlQWRkcmVzcyA9IGZ1bmN0aW9uKCkge307XG4gIGxldCBoYW5kbGVSZXNldCA9IGZ1bmN0aW9uKCkge307XG4gIGxldCBtZXNzYWdlcyA9IG51bGw7XG5cbiAgbGV0IHJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKGVyciwgZGF0YSkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIG1lc3NhZ2VzLnRleHQoZXJyLm1zZyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWVzc2FnZXMudGV4dChcIlwiKTtcbiAgfTtcblxuICBsZXQgaGFuZGxlU3VibWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNvbnN0IGZvcm0gPSBkMy5zZWxlY3QoZDMuZXZlbnQudGFyZ2V0KTtcbiAgICBjb25zdCBhZGRyZXNzID0gZm9ybS5zZWxlY3QoJy5yZXByZXNlbnRhdGl2ZS1zZWFyY2gtZm9ybV9fYWRkcmVzcy1pbnB1dCcpLm5vZGUoKS52YWx1ZTtcblxuICAgIGlmICghYWRkcmVzcykge1xuICAgICAgLy8gRG9uJ3QgYWxsb3cgYW4gZW1wdHkgYWRkcmVzc1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIG1lc3NhZ2VzID0gZm9ybS5zZWxlY3QoJy5yZXByZXNlbnRhdGl2ZS1zZWFyY2gtZm9ybV9fbWVzc2FnZXMnKTtcbiAgICBoYW5kbGVBZGRyZXNzKGFkZHJlc3MsIHJlY2VpdmVSZXNwb25zZSk7XG4gIH07XG5cbiAgY29uc3Qgc2VhcmNoID0gZnVuY3Rpb24oc2VsZWN0aW9uKSB7XG4gICAgc2VsZWN0aW9uLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBzZWwgPSBkMy5zZWxlY3QodGhpcyk7XG5cbiAgICAgIHNlbC5zZWxlY3RBbGwoJyonKS5yZW1vdmUoKTtcblxuICAgICAgY29uc3QgZm9ybSA9IHNlbC5hcHBlbmQoJ2Zvcm0nKVxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdyZXByZXNlbnRhdGl2ZS1zZWFyY2gtZm9ybScpXG4gICAgICAgICAgLm9uKCdzdWJtaXQnLCBoYW5kbGVTdWJtaXQpO1xuXG4gICAgICBmb3JtLmFwcGVuZCgnaW5wdXQnKVxuICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ3RleHQnKVxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdyZXByZXNlbnRhdGl2ZS1zZWFyY2gtZm9ybV9fYWRkcmVzcy1pbnB1dCcpXG4gICAgICAgICAgLmF0dHIoJ3BsYWNlaG9sZGVyJywgXCJFbnRlciB5b3VyIGFkZHJlc3NcIik7XG5cbiAgICAgIGZvcm0uYXBwZW5kKCdidXR0b24nKVxuICAgICAgICAgIC5hdHRyKCd0eXBlJywgJ3N1Ym1pdCcpXG4gICAgICAgICAgLnRleHQoXCJGaW5kIHlvdXIgcmVwcmVzZW50YXRpdmVcIilcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAncmVwcmVzZW50YXRpdmUtc2VhcmNoLWZvcm1fX2J0biByZXByZXNlbnRhdGl2ZS1zZWFyY2gtZm9ybV9fYnRuLS1zdWJtaXQnKTtcblxuICAgICAgZm9ybS5hcHBlbmQoJ2J1dHRvbicpXG4gICAgICAgICAgLmF0dHIoJ3R5cGUnLCAncmVzZXQnKVxuICAgICAgICAgIC50ZXh0KFwiU3RhcnQgb3ZlclwiKVxuICAgICAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBtZXNzYWdlcy50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgbWVzc2FnZXMuc2VsZWN0QWxsKCcqJykucmVtb3ZlKCk7XG4gICAgICAgICAgICBoYW5kbGVSZXNldCgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3JlcHJlc2VudGF0aXZlLXNlYXJjaC1mb3JtX19idG4gcmVwcmVzZW50YXRpdmUtc2VhcmNoLWZvcm1fX2J0bi0tcmVzZXQnKTtcblxuICAgICAgZm9ybS5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3JlcHJlc2VudGF0aXZlLXNlYXJjaC1mb3JtX19tZXNzYWdlcycpO1xuICAgIH0pO1xuICB9XG5cbiAgc2VhcmNoLmhhbmRsZUFkZHJlc3MgPSBmdW5jdGlvbih2YWwpIHtcbiAgICBpZiAoIXZhbCkgeyByZXR1cm4gaGFuZGxlQWRkcmVzczsgfVxuXG4gICAgaGFuZGxlQWRkcmVzcyA9IHZhbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNlYXJjaC5oYW5kbGVSZXNldCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIGlmICghdmFsKSB7IHJldHVybiBoYW5kbGVSZXNldDsgfVxuXG4gICAgaGFuZGxlUmVzZXQgPSB2YWw7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICByZXR1cm4gc2VhcmNoO1xufVxuIiwiaW1wb3J0ICogYXMgZDMgZnJvbSBcImQzXCI7XG5cbmZ1bmN0aW9uIG9jZElkVG9EaXN0cmljdChvY2RJZCkge1xuICBjb25zdCBiaXRzID0gb2NkSWQuc3BsaXQoJzonKTtcbiAgY29uc3Qgc3RhdGUgPSBiaXRzW2JpdHMubGVuZ3RoIC0gMl0uc2xpY2UoMCwgMikudG9VcHBlckNhc2UoKTtcbiAgY29uc3QgZGlzdHJpY3QgPSBiaXRzW2JpdHMubGVuZ3RoIC0gMV07XG4gIHJldHVybiBzdGF0ZSArIFwiLVwiICsgZGlzdHJpY3Q7XG59XG5cbmZ1bmN0aW9uIG9mZmljaWFsRGlzdHJpY3Qob2ZmaWNpYWwpIHtcbiAgcmV0dXJuIG9jZElkVG9EaXN0cmljdChvZmZpY2lhbC5vZmZpY2UuZGl2aXNpb24ub2NkX2lkKTtcbn1cblxuZnVuY3Rpb24gbWVldGluZ3NCeU9mZmljaWFsKG1lZXRpbmdzKSB7XG4gIGNvbnN0IGJ5T2ZmaWNpYWwgPSBtZWV0aW5ncy5yZWR1Y2UoKGxvb2t1cCwgbWVldGluZykgPT4ge1xuICAgIGlmICghbG9va3VwW21lZXRpbmcub2ZmaWNpYWwuaWRdKSB7XG4gICAgICBsb29rdXBbbWVldGluZy5vZmZpY2lhbC5pZF0gPSB7XG4gICAgICAgIG9mZmljaWFsOiBtZWV0aW5nLm9mZmljaWFsLFxuICAgICAgICBtZWV0aW5nczogW11cbiAgICAgIH07XG4gICAgfVxuICAgIGxvb2t1cFttZWV0aW5nLm9mZmljaWFsLmlkXS5tZWV0aW5ncy5wdXNoKG1lZXRpbmcpO1xuICAgIHJldHVybiBsb29rdXA7XG4gIH0sIHt9KTtcblxuICByZXR1cm4gZDMudmFsdWVzKGJ5T2ZmaWNpYWwpO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJ0eUxhYmVsKHBhcnR5KSB7XG4gIGlmIChwYXJ0eSA9PSBcIlJlcHVibGljYW5cIikge1xuICAgIHJldHVybiBcIlJcIjtcbiAgfVxuICBlbHNlIGlmIChwYXJ0eSA9PSBcIkRlbW9jcmF0aWNcIikge1xuICAgIHJldHVybiBcIkRcIjtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXJPZmZpY2lhbChzZWwpIHtcbiAgc2VsLmVhY2goZnVuY3Rpb24oZCkge1xuICAgIGNvbnN0IGVsID0gZDMuc2VsZWN0KHRoaXMpO1xuXG4gICAgY29uc3QgcGFydHlMYWJlbCA9IGdldFBhcnR5TGFiZWwoZC5vZmZpY2lhbC5wYXJ0eSk7XG4gICAgbGV0IG9mZmljaWFsQ2xhc3MgPSBcInRpbWVsaW5lX19tZWV0aW5nX19vZmZpY2lhbFwiO1xuICAgIGlmIChwYXJ0eUxhYmVsKSB7XG4gICAgICBvZmZpY2lhbENsYXNzICs9IFwiIHRpbWVsaW5lX19tZWV0aW5nX19vZmZpY2lhbC0tXCIgKyBwYXJ0eUxhYmVsLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgZWwuYXBwZW5kKCdzcGFuJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgb2ZmaWNpYWxDbGFzcylcbiAgICAgICAgLnRleHQoZC5vZmZpY2lhbC5uYW1lKTtcblxuICAgIGlmIChwYXJ0eUxhYmVsKSB7XG4gICAgICBlbC5hcHBlbmQoJ3NwYW4nKVxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0aW1lbGluZV9fbWVldGluZ19fcGFydHkgdGltZWxpbmVfX21lZXRpbmdfX3BhcnR5LS0nICsgcGFydHlMYWJlbC50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgIC50ZXh0KFwiIChcIiArIHBhcnR5TGFiZWwgKyBcIilcIik7XG4gICAgfVxuXG4gICAgZWwuYXBwZW5kKCdzcGFuJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RpbWVsaW5lX19tZWV0aW5nX19kaXN0cmljdCcpXG4gICAgICAgIC50ZXh0KFwiIChcIiArIG9mZmljaWFsRGlzdHJpY3QoZC5vZmZpY2lhbCkgKyBcIilcIik7XG5cbiAgICBpZiAoZC5tZWV0aW5ncy5sZW5ndGggPT0gMSkge1xuICAgICAgaWYgKGQubWVldGluZ3NbMF0ubWVldGluZ190eXBlID09IFwidGVsZXBob25lXCIpIHtcbiAgICAgICAgZWwuYXBwZW5kKCdzcGFuJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0aW1lbGluZV9fbWVldGluZ19fdHlwZSB0aW1lbGluZV9fbWVldGluZ19fdHlwZS0tdGVsZXBob25lJylcbiAgICAgICAgICAgIC50ZXh0KFwiIFxcdTI2MEVcIik7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChkLm1lZXRpbmdzWzBdLm1lZXRpbmdfdHlwZSA9PSBcImZhY2Vib29rXCIpIHtcbiAgICAgICAgZWwuYXBwZW5kKCdzcGFuJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0aW1lbGluZV9fbWVldGluZ19fdHlwZSB0aW1lbGluZV9fbWVldGluZ19fdHlwZS0tZmFjZWJvb2snKVxuICAgICAgICAgICAgLnRleHQoXCIgZlwiKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGQubWVldGluZ3NbMF0ubWVldGluZ190eXBlID09IFwicmFkaW9cIikge1xuICAgICAgICBlbC5hcHBlbmQoJ3NwYW4nKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RpbWVsaW5lX19tZWV0aW5nX190eXBlIHRpbWVsaW5lX19tZWV0aW5nX190eXBlLS1yYWRpbycpXG4gICAgICAgICAgICAudGV4dChcIiBcXHUxRjRGQlwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZC5tZWV0aW5ncy5sZW5ndGggPiAxKSB7XG4gICAgICBlbC5hcHBlbmQoJ3NwYW4nKVxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0aW1lbGluZV9fbWVldGluZ19fY291bnQnKVxuICAgICAgICAgIC50ZXh0KFwiIHhcIiArIGQubWVldGluZ3MubGVuZ3RoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJEYXkoc2VsLCBkYXRlRm9ybWF0KSB7XG4gIHNlbC5hcHBlbmQoJ2gyJylcbiAgICAuYXR0cignY2xhc3MnLCAndGltZWxpbmVfX2RheV9fbnVtYmVyJylcbiAgICAudGV4dChkID0+IGQuZGF5KTtcblxuICBzZWwuYXBwZW5kKCdkaXYnKVxuICAgIC5hdHRyKCdjbGFzcycsICd0aW1lbGluZV9fZGF5X19kYXRlJylcbiAgICAudGV4dChkID0+IGRhdGVGb3JtYXQoZC5kYXRlKSk7XG5cbiAgc2VsLmFwcGVuZCgnZGl2JylcbiAgICAuYXR0cignY2xhc3MnLCAndGltZWxpbmVfX2RheV9fbGFiZWwnKVxuICAgIC50ZXh0KGQgPT4gZC5sYWJlbCk7XG5cbiAgc2VsLnNlbGVjdEFsbCgnLnRpbWVsaW5lX19tZWV0aW5nJylcbiAgICAuZGF0YShkID0+IG1lZXRpbmdzQnlPZmZpY2lhbChkLm1lZXRpbmdzKSlcbiAgICAuZW50ZXIoKS5hcHBlbmQoJ2RpdicpXG4gICAgICAuYXR0cignY2xhc3MnLCAndGltZWxpbmVfX21lZXRpbmcnKVxuICAgICAgLmNhbGwocmVuZGVyT2ZmaWNpYWwpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtZWV0aW5nVGltZWxpbmUoKSB7XG4gIGxldCBkYXRlRm9ybWF0ID0gZDMudGltZUZvcm1hdChcIiVCICVkLCAlWVwiKTtcblxuICBmdW5jdGlvbiB0aW1lbGluZShzZWxlY3Rpb24pIHtcbiAgICBzZWxlY3Rpb24uZWFjaChmdW5jdGlvbihkYXlzKSB7XG4gICAgICBjb25zdCBjb250YWluZXIgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICBjb250YWluZXIuc2VsZWN0QWxsKCcqJykucmVtb3ZlKCk7XG5cbiAgICAgIGNvbnN0IHRpbWVsaW5lID0gY29udGFpbmVyLmFwcGVuZCgnZGl2JylcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGltZWxpbmUnKTtcblxuICAgICAgdGltZWxpbmUuc2VsZWN0QWxsKCcudGltZWxpbmVfX2RheScpXG4gICAgICAgIC5kYXRhKGRheXMpXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZGl2JylcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGltZWxpbmVfX2RheScpXG4gICAgICAgICAgLmNhbGwocmVuZGVyRGF5LCBkYXRlRm9ybWF0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB0aW1lbGluZTtcbn1cbiIsImltcG9ydCAqIGFzIGQzIGZyb20gXCJkM1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gcGx1cmFsaXplKHMsIG4sIHBsdXJhbCkge1xuICBpZiAobiA9PSAxKSB7XG4gICAgcmV0dXJuIHM7XG4gIH1cblxuICBpZiAocGx1cmFsKSB7XG4gICAgcmV0dXJuIHBsdXJhbDtcbiAgfVxuXG4gIHJldHVybiBzICsgJ3MnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGN0Rm9ybWF0KHZhbCkge1xuICByZXR1cm4gZDMuZm9ybWF0KFwiLjAlXCIpKHZhbCkucmVwbGFjZSgnJScsICcnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwU3R5bGVOdW1iZXIobnVtKSB7XG4gIGNvbnN0IGxvb2t1cCA9IHtcbiAgICAxOiAnb25lJyxcbiAgICAyOiAndHdvJyxcbiAgICAzOiAndGhyZWUnLFxuICAgIDQ6ICdmb3VyJyxcbiAgICA1OiAnZml2ZScsXG4gICAgNjogJ3NpeCcsXG4gICAgNzogJ3NldmVuJyxcbiAgICA4OiAnZWlnaHQnLFxuICAgIDk6ICduaW5lJ1xuICB9O1xuXG4gIGlmIChudW0gPiAwICYmIG51bSA8IDEwKSB7XG4gICAgcmV0dXJuIGxvb2t1cFtudW1dO1xuICB9XG5cbiAgcmV0dXJuIG51bTtcbn1cbiJdfQ==
